/**
 * Generates a text file listing all assigned keybinds.
 * @param {KeybindManager} keybindManager 
 * @returns {string} File content
 */
function GenerateMacroFile(keybindManager) {
    const bindings = keybindManager.getAllBindings();

    let output = `# Stream Deck Keybinds
# Generated by streamdeck-generator
#
# INSTRUCTIONS:
# 1. This file lists the keybinds expected by your Stream Deck profile.
# 2. You must ensure these keys are bound to the corresponding actions in WoW.
# 3. For "Universal" keys (Review "Universal Bar" assignments), bind them in Game Options.
# 4. For spell-specific keys, create macros or bind bar slots.

`;

    // Categorize or just list
    // bindings is Array<{id, key}>

    let maxKeyLen = 0;
    bindings.forEach(b => {
        if (b.key && b.key.length > maxKeyLen) maxKeyLen = b.key.length;
    });

    bindings.forEach(b => {
        if (!b.key) return; // Skip unbound
        const padding = ' '.repeat(maxKeyLen - b.key.length);
        output += `${b.key}${padding} -> ${b.id}\n`;
    });

    return output;
}

module.exports = GenerateMacroFile;
